"use strict";(self.webpackChunkbigdata_blog=self.webpackChunkbigdata_blog||[]).push([[7401],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>u});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},l=Object.keys(e);for(o=0;o<l.length;o++)n=l[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)n=l[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=o.createContext({}),c=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=c(e.components);return o.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,s=e.parentName,d=r(e,["components","mdxType","originalType","parentName"]),m=c(n),u=a,g=m["".concat(s,".").concat(u)]||m[u]||p[u]||l;return n?o.createElement(g,i(i({ref:t},d),{},{components:n})):o.createElement(g,i({ref:t},d))}));function u(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,i=new Array(l);i[0]=m;var r={};for(var s in t)hasOwnProperty.call(t,s)&&(r[s]=t[s]);r.originalType=e,r.mdxType="string"==typeof e?e:a,i[1]=r;for(var c=2;c<l;c++)i[c]=n[c];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}m.displayName="MDXCreateElement"},4744:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>p,frontMatter:()=>l,metadata:()=>r,toc:()=>c});var o=n(7462),a=(n(7294),n(3905));const l={},i="\u5927\u6570\u636e\u6846\u67b6_FAQ",r={unversionedId:"\u5927\u6570\u636e\u6846\u67b6_FAQ",id:"\u5927\u6570\u636e\u6846\u67b6_FAQ",title:"\u5927\u6570\u636e\u6846\u67b6_FAQ",description:"Debezium_FAQ",source:"@site/document/\u5927\u6570\u636e\u6846\u67b6_FAQ.md",sourceDirName:".",slug:"/\u5927\u6570\u636e\u6846\u67b6_FAQ",permalink:"/Bigdata_Blog_Website/document/\u5927\u6570\u636e\u6846\u67b6_FAQ",draft:!1,tags:[],version:"current",lastUpdatedBy:"dependabot[bot]",lastUpdatedAt:1698395333,formattedLastUpdatedAt:"2023\u5e7410\u670827\u65e5",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\u535a\u5ba2\u63a8\u8350",permalink:"/Bigdata_Blog_Website/document/blog recommend"}},s={},c=[{value:"Debezium_FAQ",id:"debezium_faq",level:2},{value:"Q1 : Debezium for MySQL \u7684\u7b80\u5355\u793a\u4f8b",id:"q1--debezium-for-mysql-\u7684\u7b80\u5355\u793a\u4f8b",level:3},{value:"Dolphinscheduler_FAQ",id:"dolphinscheduler_faq",level:2},{value:"Q1: Dolphinscheduler 2.0  MySQL Jdbc \u7f3a\u5931\u95ee\u9898",id:"q1-dolphinscheduler-20--mysql-jdbc-\u7f3a\u5931\u95ee\u9898",level:3},{value:"Q2: Dolphinscheduler \u5931\u8d25\u91cd\u8bd5\u673a\u5236\u6709\u4e00\u5b9a bug \u5bfc\u81f4\u91cd\u8bd5\u5931\u8d25",id:"q2-dolphinscheduler-\u5931\u8d25\u91cd\u8bd5\u673a\u5236\u6709\u4e00\u5b9a-bug-\u5bfc\u81f4\u91cd\u8bd5\u5931\u8d25",level:3},{value:"Flink_FAQ",id:"flink_faq",level:2},{value:"Q1: Flink standalone \u96c6\u7fa4\u62a5\u9519 \u8fdb\u800c\u5bfc\u81f4\u96c6\u7fa4\u975e\u6b63\u5e38\u5b95\u673a",id:"q1-flink-standalone-\u96c6\u7fa4\u62a5\u9519-\u8fdb\u800c\u5bfc\u81f4\u96c6\u7fa4\u975e\u6b63\u5e38\u5b95\u673a",level:3},{value:"Q2: Flink \u5b98\u65b9\u4ec0\u4e48\u65f6\u5019\u652f\u6301 oracle sql \u8fde\u63a5\u5668\uff1f",id:"q2-flink-\u5b98\u65b9\u4ec0\u4e48\u65f6\u5019\u652f\u6301-oracle-sql-\u8fde\u63a5\u5668",level:3},{value:"Q3 Flink Web ui \u4e71\u7801\u600e\u4e48\u529e\uff1f",id:"q3-flink-web-ui-\u4e71\u7801\u600e\u4e48\u529e",level:3},{value:"Q4 Flink Per-Job Mode (deprecated)?",id:"q4-flink-per-job-mode-deprecated",level:3},{value:"Hive_FAQ",id:"hive_faq",level:2},{value:"Q1: Hive \u5982\u4f55\u4f7f\u7528\u8fbe\u68a6\u6570\u636e\u5e93\u5b58\u50a8\u5143\u6570\u636e\u4fe1\u606f\uff1f",id:"q1-hive-\u5982\u4f55\u4f7f\u7528\u8fbe\u68a6\u6570\u636e\u5e93\u5b58\u50a8\u5143\u6570\u636e\u4fe1\u606f",level:3},{value:"MongoDB_CDC_FAQ",id:"mongodb_cdc_faq",level:2},{value:"Q1: MongoDB CDC \u652f\u6301 \u5168\u91cf+\u589e\u91cf\u8bfb \u548c \u53ea\u8bfb\u589e\u91cf\u5417\uff1f",id:"q1-mongodb-cdc-\u652f\u6301-\u5168\u91cf\u589e\u91cf\u8bfb-\u548c-\u53ea\u8bfb\u589e\u91cf\u5417",level:3},{value:"Q2: MongoDB CDC \u652f\u6301\u4ece checkpoint \u6062\u590d\u5417? \u539f\u7406\u662f\u600e\u4e48\u6837\u7684\u5462\uff1f",id:"q2-mongodb-cdc-\u652f\u6301\u4ece-checkpoint-\u6062\u590d\u5417-\u539f\u7406\u662f\u600e\u4e48\u6837\u7684\u5462",level:3},{value:"Q3: MongoDB CDC \u652f\u6301\u8f93\u51fa -U\uff08update_before\uff0c\u66f4\u65b0\u524d\u955c\u50cf\u503c\uff09\u6d88\u606f\u5417\uff1f",id:"q3-mongodb-cdc-\u652f\u6301\u8f93\u51fa--uupdate_before\u66f4\u65b0\u524d\u955c\u50cf\u503c\u6d88\u606f\u5417",level:3},{value:"Q4: MongoDB CDC \u652f\u6301\u8ba2\u9605\u591a\u4e2a collection \u5417\uff1f",id:"q4-mongodb-cdc-\u652f\u6301\u8ba2\u9605\u591a\u4e2a-collection-\u5417",level:3},{value:"Q5: MongoDB CDC \u652f\u6301\u8bbe\u7f6e\u591a\u5e76\u53d1\u5ea6\u8bfb\u53d6\u5417\uff1f",id:"q5-mongodb-cdc-\u652f\u6301\u8bbe\u7f6e\u591a\u5e76\u53d1\u5ea6\u8bfb\u53d6\u5417",level:3},{value:"Q6: MongoDB CDC \u652f\u6301 MongoDB \u7684\u7248\u672c\u662f\u54ea\u4e9b\uff1f",id:"q6-mongodb-cdc-\u652f\u6301-mongodb-\u7684\u7248\u672c\u662f\u54ea\u4e9b",level:3},{value:"Q7: MongoDB CDC \u652f\u6301 MongoDB \u7684\u8fd0\u884c\u6a21\u5f0f\u662f\u4ec0\u4e48\uff1f",id:"q7-mongodb-cdc-\u652f\u6301-mongodb-\u7684\u8fd0\u884c\u6a21\u5f0f\u662f\u4ec0\u4e48",level:3},{value:"Q8: MongoDB CDC \u62a5\u9519\u7528\u6237\u540d\u5bc6\u7801\u9519\u8bef, \u4f46\u5176\u4ed6\u7ec4\u4ef6\u4f7f\u7528\u8be5\u7528\u6237\u540d\u5bc6\u7801\u90fd\u80fd\u6b63\u5e38\u8fde\u63a5\uff0c\u8fd9\u662f\u4ec0\u4e48\u539f\u56e0\uff1f",id:"q8-mongodb-cdc-\u62a5\u9519\u7528\u6237\u540d\u5bc6\u7801\u9519\u8bef-\u4f46\u5176\u4ed6\u7ec4\u4ef6\u4f7f\u7528\u8be5\u7528\u6237\u540d\u5bc6\u7801\u90fd\u80fd\u6b63\u5e38\u8fde\u63a5\u8fd9\u662f\u4ec0\u4e48\u539f\u56e0",level:3},{value:"Q9: MongoDB CDC \u662f\u5426\u652f\u6301 debezium \u76f8\u5173\u7684\u53c2\u6570\uff1f",id:"q9-mongodb-cdc-\u662f\u5426\u652f\u6301-debezium-\u76f8\u5173\u7684\u53c2\u6570",level:3},{value:"Q10\uff1aMongoDB CDC \u5168\u91cf\u8bfb\u53d6\u9636\u6bb5\uff0c\u4f5c\u4e1a\u5931\u8d25\u540e\uff0c\u53ef\u4ee5\u4ece checkpoint \u7ee7\u7eed\u8bfb\u53d6\u5417\uff1f",id:"q10mongodb-cdc-\u5168\u91cf\u8bfb\u53d6\u9636\u6bb5\u4f5c\u4e1a\u5931\u8d25\u540e\u53ef\u4ee5\u4ece-checkpoint-\u7ee7\u7eed\u8bfb\u53d6\u5417",level:3},{value:"MySQL CDC FAQ",id:"mysql-cdc-faq",level:2},{value:"Q1: \u4f7f\u7528CDC 2.x\u7248\u672c\uff0c\u53ea\u80fd\u8bfb\u53d6\u5168\u91cf\u6570\u636e\uff0c\u65e0\u6cd5\u8bfb\u53d6\u589e\u91cf\uff08binlog\uff09 \u6570\u636e\uff0c\u600e\u4e48\u56de\u4e8b\uff1f",id:"q1-\u4f7f\u7528cdc-2x\u7248\u672c\u53ea\u80fd\u8bfb\u53d6\u5168\u91cf\u6570\u636e\u65e0\u6cd5\u8bfb\u53d6\u589e\u91cfbinlog-\u6570\u636e\u600e\u4e48\u56de\u4e8b",level:3},{value:"Q2: \u4f7f\u7528 MySQL CDC\uff0c\u589e\u91cf\u9636\u6bb5\u8bfb\u53d6\u51fa\u6765\u7684 timestamp \u5b57\u6bb5\u65f6\u533a\u76f8\u5dee8\u5c0f\u65f6\uff0c\u600e\u4e48\u56de\u4e8b\u5462\uff1f",id:"q2-\u4f7f\u7528-mysql-cdc\u589e\u91cf\u9636\u6bb5\u8bfb\u53d6\u51fa\u6765\u7684-timestamp-\u5b57\u6bb5\u65f6\u533a\u76f8\u5dee8\u5c0f\u65f6\u600e\u4e48\u56de\u4e8b\u5462",level:3},{value:"Q3: mysql cdc\u652f\u6301\u76d1\u542c\u4ece\u5e93\u5417\uff1f\u4ece\u5e93\u9700\u8981\u5982\u4f55\u914d\u7f6e\uff1f",id:"q3-mysql-cdc\u652f\u6301\u76d1\u542c\u4ece\u5e93\u5417\u4ece\u5e93\u9700\u8981\u5982\u4f55\u914d\u7f6e",level:3},{value:"Q4: \u6211\u60f3\u540c\u6b65\u5206\u5e93\u5206\u8868\uff0c\u5e94\u8be5\u5982\u4f55\u914d\u7f6e\uff1f",id:"q4-\u6211\u60f3\u540c\u6b65\u5206\u5e93\u5206\u8868\u5e94\u8be5\u5982\u4f55\u914d\u7f6e",level:3},{value:"Q5: \u6211\u60f3\u8df3\u8fc7\u5b58\u91cf\u8bfb\u53d6\u9636\u6bb5\uff0c\u53ea\u8bfb\u53d6 binlog \u6570\u636e\uff0c\u600e\u4e48\u914d\u7f6e\uff1f",id:"q5-\u6211\u60f3\u8df3\u8fc7\u5b58\u91cf\u8bfb\u53d6\u9636\u6bb5\u53ea\u8bfb\u53d6-binlog-\u6570\u636e\u600e\u4e48\u914d\u7f6e",level:3},{value:"Q6: \u6211\u60f3\u83b7\u53d6\u6570\u636e\u5e93\u4e2d\u7684 DDL\u4e8b\u4ef6\uff0c\u600e\u4e48\u529e\uff0c\u6709demo\u5417\uff1f",id:"q6-\u6211\u60f3\u83b7\u53d6\u6570\u636e\u5e93\u4e2d\u7684-ddl\u4e8b\u4ef6\u600e\u4e48\u529e\u6709demo\u5417",level:3},{value:"Q7: MySQL \u6574\u5e93\u540c\u6b65\u600e\u4e48\u505a, Flink CDC \u652f\u6301\u5417\uff1f",id:"q7-mysql-\u6574\u5e93\u540c\u6b65\u600e\u4e48\u505a-flink-cdc-\u652f\u6301\u5417",level:3},{value:"Q8: \u540c\u4e00\u4e2a\u5b9e\u4f8b\u4e0b\uff0c\u67d0\u4e2a\u5e93\u7684\u8868\u65e0\u6cd5\u540c\u6b65\u589e\u91cf\u6570\u636e\uff0c\u5176\u4ed6\u5e93\u90fd\u53ef\u4ee5\uff0c\u8fd9\u662f\u4e3a\u5565\uff1f",id:"q8-\u540c\u4e00\u4e2a\u5b9e\u4f8b\u4e0b\u67d0\u4e2a\u5e93\u7684\u8868\u65e0\u6cd5\u540c\u6b65\u589e\u91cf\u6570\u636e\u5176\u4ed6\u5e93\u90fd\u53ef\u4ee5\u8fd9\u662f\u4e3a\u5565",level:3},{value:"Q9: \u4f5c\u4e1a\u62a5\u9519 The connector is trying to read binlog starting at GTIDs xxx and binlog file &#39;binlog.000064&#39;, pos=89887992, skipping 4 events plus 1 rows, but this is no longer available on the server. Reconfigure the connector to use a snapshot when needed\uff0c\u600e\u4e48\u529e\u5462\uff1f",id:"q9-\u4f5c\u4e1a\u62a5\u9519-the-connector-is-trying-to-read-binlog-starting-at-gtids-xxx-and-binlog-file-binlog000064-pos89887992-skipping-4-events-plus-1-rows-but-this-is-no-longer-available-on-the-server-reconfigure-the-connector-to-use-a-snapshot-when-needed\u600e\u4e48\u529e\u5462",level:3},{value:"Q10: \u4f5c\u4e1a\u62a5\u9519 ConnectException: A slave with the same server_uuid/server_id as this slave has connected to the master\uff0c\u600e\u4e48\u529e\u5462\uff1f",id:"q10-\u4f5c\u4e1a\u62a5\u9519-connectexception-a-slave-with-the-same-server_uuidserver_id-as-this-slave-has-connected-to-the-master\u600e\u4e48\u529e\u5462",level:3},{value:"Q11: \u4f5c\u4e1a\u62a5\u9519 ConnectException: Received DML \u2018\u2026\u2019 for processing, binlog probably contains events generated with statement or mixed based replication format\uff0c\u600e\u4e48\u529e\u5462\uff1f",id:"q11-\u4f5c\u4e1a\u62a5\u9519-connectexception-received-dml--for-processing-binlog-probably-contains-events-generated-with-statement-or-mixed-based-replication-format\u600e\u4e48\u529e\u5462",level:3},{value:"Q12: \u4f5c\u4e1a\u62a5\u9519 Mysql8.0 Public Key Retrieval is not allowed\uff0c \u600e\u4e48\u529e\u5462 ?",id:"q12-\u4f5c\u4e1a\u62a5\u9519-mysql80-public-key-retrieval-is-not-allowed-\u600e\u4e48\u529e\u5462-",level:3},{value:"Q13: \u4f5c\u4e1a\u62a5\u9519 EventDataDeserializationException: Failed to deserialize data of EventHeaderV4 .... Caused by: java.net.SocketException: Connection reset\uff0c \u600e\u4e48\u529e\u5462 ?",id:"q13-\u4f5c\u4e1a\u62a5\u9519-eventdatadeserializationexception-failed-to-deserialize-data-of-eventheaderv4--caused-by-javanetsocketexception-connection-reset-\u600e\u4e48\u529e\u5462-",level:3},{value:"Q14: \u4f5c\u4e1a\u62a5\u9519 The slave is connecting using CHANGE MASTER TO MASTER_AUTO_POSITION = 1, but the master has purged binary logs containing GTIDs that the slave requires. \u600e\u4e48\u529e\u5462 ?",id:"q14-\u4f5c\u4e1a\u62a5\u9519-the-slave-is-connecting-using-change-master-to-master_auto_position--1-but-the-master-has-purged-binary-logs-containing-gtids-that-the-slave-requires-\u600e\u4e48\u529e\u5462-",level:3},{value:"Q15: \u5728 DataStream API\u4e2d\u6784\u5efaMySQL CDC\u6e90\u65f6\u5982\u4f55\u914d\u7f6etableList\u9009\u9879\uff1f",id:"q15-\u5728-datastream-api\u4e2d\u6784\u5efamysql-cdc\u6e90\u65f6\u5982\u4f55\u914d\u7f6etablelist\u9009\u9879",level:3},{value:"Postgres CDC FAQ",id:"postgres-cdc-faq",level:2},{value:"Q1: \u53d1\u73b0 PG \u670d\u52a1\u5668\u78c1\u76d8\u4f7f\u7528\u7387\u9ad8\uff0cWAL \u4e0d\u91ca\u653e \u662f\u4ec0\u4e48\u539f\u56e0\uff1f",id:"q1-\u53d1\u73b0-pg-\u670d\u52a1\u5668\u78c1\u76d8\u4f7f\u7528\u7387\u9ad8wal-\u4e0d\u91ca\u653e-\u662f\u4ec0\u4e48\u539f\u56e0",level:3},{value:"Q2: Flink Postgres CDC \u540c\u6b65 Postgres \u4e2d\u5c06 \u8d85\u8fc7\u6700\u5927\u7cbe\u5ea6\uff0838\uff0c18\uff09\u7684 DECIMAL \u7c7b\u578b\u8fd4\u56de NULL",id:"q2-flink-postgres-cdc-\u540c\u6b65-postgres-\u4e2d\u5c06-\u8d85\u8fc7\u6700\u5927\u7cbe\u5ea63818\u7684-decimal-\u7c7b\u578b\u8fd4\u56de-null",level:3},{value:"Q3: Flink Postgres CDC \u63d0\u793a\u672a\u4f20\u8f93 TOAST \u6570\u636e\uff0c\u662f\u4ec0\u4e48\u539f\u56e0\uff1f",id:"q3-flink-postgres-cdc-\u63d0\u793a\u672a\u4f20\u8f93-toast-\u6570\u636e\u662f\u4ec0\u4e48\u539f\u56e0",level:3},{value:"Q4: \u4f5c\u4e1a\u62a5\u9519 Replication slot &quot;xxxx&quot; is active\uff0c \u600e\u4e48\u529e\uff1f",id:"q4-\u4f5c\u4e1a\u62a5\u9519-replication-slot-xxxx-is-active-\u600e\u4e48\u529e",level:3},{value:"Q5: \u4f5c\u4e1a\u6709\u810f\u6570\u636e\uff0c\u6bd4\u5982\u975e\u6cd5\u7684\u65e5\u671f\uff0c\u6709\u53c2\u6570\u53ef\u4ee5\u914d\u7f6e\u53ef\u4ee5\u8fc7\u6ee4\u5417\uff1f",id:"q5-\u4f5c\u4e1a\u6709\u810f\u6570\u636e\u6bd4\u5982\u975e\u6cd5\u7684\u65e5\u671f\u6709\u53c2\u6570\u53ef\u4ee5\u914d\u7f6e\u53ef\u4ee5\u8fc7\u6ee4\u5417",level:3},{value:"Q6: \u5728DataStream API\u4e2d\u6784\u5efaPostgres CDC\u6e90\u65f6\u5982\u4f55\u914d\u7f6etableList\u9009\u9879\uff1f",id:"q6-\u5728datastream-api\u4e2d\u6784\u5efapostgres-cdc\u6e90\u65f6\u5982\u4f55\u914d\u7f6etablelist\u9009\u9879",level:3},{value:"Oracle_FAQ",id:"oracle_faq",level:2},{value:"Q1: Oracle \u5982\u4f55\u5b9e\u73b0\u5bf9\u540c\u4e00\u4e2a\u8868\u7684 upsert \u529f\u80fd\uff1f",id:"q1-oracle-\u5982\u4f55\u5b9e\u73b0\u5bf9\u540c\u4e00\u4e2a\u8868\u7684-upsert-\u529f\u80fd",level:3},{value:"\u5373\u5e2d\u67e5\u8be2\u573a\u666f\u5206\u6790",id:"\u5373\u5e2d\u67e5\u8be2\u573a\u666f\u5206\u6790",level:2}],d={toc:c};function p(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"\u5927\u6570\u636e\u6846\u67b6_faq"},"\u5927\u6570\u636e\u6846\u67b6_FAQ"),(0,a.kt)("h2",{id:"debezium_faq"},"Debezium_FAQ"),(0,a.kt)("h3",{id:"q1--debezium-for-mysql-\u7684\u7b80\u5355\u793a\u4f8b"},"Q1 : Debezium for MySQL \u7684\u7b80\u5355\u793a\u4f8b"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},' curl -H "Content-Type: application/json" -X POST -d  \'{\n      "name" : "xxxx_2022",\n      "config" : {\n          "connector.class" : "io.debezium.connector.mysql.MySqlConnector",\n          "database.hostname" : "xxx.xxx.xx.xxx",\n          "database.port" : "3306",\n          "database.user" : "user",\n          "database.password" : "pass",\n          "database.server.id" : "122811",\n          "database.server.name" : "xxxx_2022",\n          "database.include.list" : "xxxx",\n          "snapshot.mode" : "schema_only",\n          "database.history.skip.unparseable.ddl": "true",\n          "key.converter": "org.apache.kafka.connect.json.JsonConverter",\n          "value.converter": "org.apache.kafka.connect.json.JsonConverter",\n          "key.converter.schemas.enable": "false",\n          "value.converter.schemas.enable": "false",\n          "include.schema.changes": "true",\n          "decimal.handling.mode" : "string",\n          "transforms": "unwrap",\n          "transforms.unwrap.type": "io.debezium.transforms.ExtractNewRecordState",\n          "transforms.unwrap.drop.tombstones": "true",\n          "transforms.unwrap.delete.handling.mode": "rewrite",\n          "transforms.unwrap.add.fields": "source.ts_ms,source.db,source.table,op",\n          "converters" : "datetime",\n          "datetime.type" : "com.darcytech.debezium.converter.MySqlDateTimeConverter",\n          "datetime.format.date" : "yyyy-MM-dd",\n          "datetime.format.time" : "HH:mm:ss",\n          "datetime.format.datetime" : "yyyy-MM-dd HH:mm:ss",\n          "datetime.format.timestamp" : "yyyy-MM-dd HH:mm:ss",\n          "datetime.format.timestamp.zone" : "UTC+8",\n          "table.include.list" : "xxxx.user,xxxx.ordertrance,xxxx.ordertrance_agent_info",\n          "database.history.kafka.bootstrap.servers":"xxxx.xxx.xx.xxx:9092,xxxx.xxx.xx.xxx:9092,xxxx.xxx.xx.xxx:9092",\n          "database.history.kafka.topic":"history_xxxx_2022"\n      }\n  }\' http://xxxx.xxx.xx.xxx:8083/connectors \n')),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"note")),(0,a.kt)("p",null,"Debezium \u8f6c\u6362 MySQL \u65f6\u95f4\u7c7b\u578b\u6bd4\u8f83\u6df7\u4e71\uff0c\u9700\u8981\u91cd\u65b0\u505a\u65f6\u95f4\u8f6c\u6362\uff0c\u5177\u4f53\u53ef\u4ee5\u53c2\u8003"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/holmofy/debezium-datetime-converter/blob/master/src/main/java/com/darcytech/debezium/converter/MySqlDateTimeConverter.java"},"https://github.com/holmofy/debezium-datetime-converter/blob/master/src/main/java/com/darcytech/debezium/converter/MySqlDateTimeConverter.java")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://blog.hufeifei.cn/2021/03/DB/mysql-binlog-parser/index.html"},"https://blog.hufeifei.cn/2021/03/DB/mysql-binlog-parser/index.html"))),(0,a.kt)("h2",{id:"dolphinscheduler_faq"},"Dolphinscheduler_FAQ"),(0,a.kt)("h3",{id:"q1-dolphinscheduler-20--mysql-jdbc-\u7f3a\u5931\u95ee\u9898"},"Q1: Dolphinscheduler 2.0  MySQL Jdbc \u7f3a\u5931\u95ee\u9898"),(0,a.kt)("p",null,"\u5728 Dolphinscheduler/lib/plugin/task/sql \u76ee\u5f55\u4e0b\u6dfb\u52a0 Jdbc jar \u5305  Dolphinscheduler 2.0 \u4e4b\u540e\u9ed8\u8ba4\u4e0d\u542b\u76f8\u5173 jar."),(0,a.kt)("h3",{id:"q2-dolphinscheduler-\u5931\u8d25\u91cd\u8bd5\u673a\u5236\u6709\u4e00\u5b9a-bug-\u5bfc\u81f4\u91cd\u8bd5\u5931\u8d25"},"Q2: Dolphinscheduler \u5931\u8d25\u91cd\u8bd5\u673a\u5236\u6709\u4e00\u5b9a bug \u5bfc\u81f4\u91cd\u8bd5\u5931\u8d25"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://www.bilibili.com/video/BV1X44y1u7P2?spm_id_from=333.999.0.0"},"Apache DolphinScheduler 22\u5e745\u6708\u7b2c\u4e00\u6b21\u5468\u4f1a")),(0,a.kt)("h2",{id:"flink_faq"},"Flink_FAQ"),(0,a.kt)("h3",{id:"q1-flink-standalone-\u96c6\u7fa4\u62a5\u9519-\u8fdb\u800c\u5bfc\u81f4\u96c6\u7fa4\u975e\u6b63\u5e38\u5b95\u673a"},"Q1: Flink standalone \u96c6\u7fa4\u62a5\u9519 \u8fdb\u800c\u5bfc\u81f4\u96c6\u7fa4\u975e\u6b63\u5e38\u5b95\u673a"),(0,a.kt)("p",null,"2022-01-15 10:06:53,481 ERROR org.apache.flink.runtime.blob.BlobServerConnection           [] - GET operation failed for BLOB 150aa5a2e247e759f21ff93c424edd3e/p-e8b09031cd0\ne01ba83667bef8a0b956dcfe18006-8d149618809ae4df5d911e989054527d from /10.176.xx.xx.\njava.nio.file.NoSuchFileException: /tmp/blobStore-39487a05-032e-4605-81f8-d1e9c7d2e1ff/incoming/temp-00000134"),(0,a.kt)("p",null,"\u539f\u56e0\uff1a \u7fa4\u53cb\uff1a\u4e4b\u524d\u9047\u5230\u8fc7 \u6211\u7684\u662f\u88ab\u8fd0\u7ef4\u6e05\u7406\u5de5\u5177\u7ed9\u6e05\u7406\u4e86\uff1b \u4f60\u770b\u770b \u53ef\u6709\u8fd9\u4e2a\u6587\u4ef6\u4e86\uff1b\u4e00\u4e9b\u914d\u7f6e \u6709\u4e09\u56db\u4e2a \u9ed8\u8ba4\u90fd\u662f /tmp \u4e0b\uff0c\u90fd\u662f\n\u53ef\u4ee5\u81ea\u5b9a\u4e49\u8def\u5f84\u7684\u3002"),(0,a.kt)("p",null,"\u4e34\u65f6\u76ee\u5f55\u88ab\u6e05\u7a7a\uff0c\u5bfc\u81f4\u6587\u4ef6\u65e0\u6cd5\u627e\u5230\u3002"),(0,a.kt)("p",null,"\u6211\u7684\u89e3\u51b3\u65b9\u6848\uff1a\u5c06 io \u76ee\u5f55\u4ece\u4e34\u65f6\u76ee\u5f55\u6539\u4e3a\u5176\u4ed6\u76ee\u5f55\u5373\u53ef\u3002"),(0,a.kt)("h3",{id:"q2-flink-\u5b98\u65b9\u4ec0\u4e48\u65f6\u5019\u652f\u6301-oracle-sql-\u8fde\u63a5\u5668"},"Q2: Flink \u5b98\u65b9\u4ec0\u4e48\u65f6\u5019\u652f\u6301 oracle sql \u8fde\u63a5\u5668\uff1f"),(0,a.kt)("p",null,"\u6839\u636eFlink 1.15 \u7684\u6700\u65b0\u5feb\u7167\u6587\u6863\uff0cFlink JDBC \u5c06\u5728 1.15 \u652f\u6301 Flink "),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://nightlies.apache.org/flink/flink-docs-master/docs/connectors/table/jdbc/"},"https://nightlies.apache.org/flink/flink-docs-master/docs/connectors/table/jdbc/")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/34996528/149879850-b7c1164f-5505-4905-a162-b6105f945866.png",alt:"image"})),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"flink 1.15 \u5df2\u53d1\u5e03 oracle \u65b9\u8a00\u5df2\u652f\u6301")),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://nightlies.apache.org/flink/flink-docs-release-1.15/docs/connectors/table/jdbc/"},"flink 1.15 JDBC SQL Connector")),(0,a.kt)("h3",{id:"q3-flink-web-ui-\u4e71\u7801\u600e\u4e48\u529e"},"Q3 Flink Web ui \u4e71\u7801\u600e\u4e48\u529e\uff1f"),(0,a.kt)("p",null,"\u5728 FLink conf \u76ee\u5f55\u4e0b\u7684 flink.conf.ymal \u6587\u4ef6\u91cc\u6dfb\u52a0"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'env.java.opts: "-Dfile.encoding=utf-8"\n')),(0,a.kt)("h3",{id:"q4-flink-per-job-mode-deprecated"},"Q4 Flink Per-Job Mode (deprecated)?"),(0,a.kt)("p",null,"\u4ece Flink 1.15 \u5f00\u59cb per-job \u88ab\u6807\u6ce8\u4e3a deprecated\uff0c\u5b98\u65b9\u5728\u4e00\u6708\u4efd\u7684\u4e00\u6b21\u6295\u7968\u4e2d\u51b3\u5b9a\u5c06 per-job \u6807\u6ce8\u4e3a deprecated\uff0c\u9884\u8ba1\u5728 flink 1.17 \u8fdb\u884c\u5177\u4f53\u5b9e\u65bd"),(0,a.kt)("p",null,"\u539f\u56e0: Per-job mode is only supported by YARN and has been deprecated in Flink 1.15."),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://nightlies.apache.org/flink/flink-docs-release-1.15/docs/deployment/resource-providers/yarn/#per-job-mode-deprecated"},"Per-Job Mode (deprecated)")),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://lists.apache.org/thread/v6oz92dfp95qcox45l0f8393089oyjv4"},"\u6295\u7968\u94fe\u63a5")),(0,a.kt)("h2",{id:"hive_faq"},"Hive_FAQ"),(0,a.kt)("h3",{id:"q1-hive-\u5982\u4f55\u4f7f\u7528\u8fbe\u68a6\u6570\u636e\u5e93\u5b58\u50a8\u5143\u6570\u636e\u4fe1\u606f"},"Q1: Hive \u5982\u4f55\u4f7f\u7528\u8fbe\u68a6\u6570\u636e\u5e93\u5b58\u50a8\u5143\u6570\u636e\u4fe1\u606f\uff1f"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/34996528/167798676-40494b35-f3c6-4b70-8aea-3cbb15238458.png",alt:"img"})),(0,a.kt)("p",null,"hive-site.xml\u91cc\u9762\u7684\u914d\u7f6e\u4fe1\u606f\u5168\u90fd\u5199\u6210\u8fbe\u68a6\u7684\uff0c\u7136\u540e\u9a71\u52a8\u5305\u4e5f\u7528\u8fbe\u68a6\u7684\uff0c\u521d\u59cb\u5316\u7684\u65f6\u5019\u5143\u6570\u636e\u5e93\u6362\u6210 oracle,schematool -dbType oracle -initSchema"),(0,a.kt)("h2",{id:"mongodb_cdc_faq"},"MongoDB_CDC_FAQ"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"MongoDB CDC FAQ \u53c2\u8003 \u672c\u6587\u4f5c\u4e86\u5206\u7c7b\u5904\u7406")),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ververica/flink-cdc-connectors/wiki/FAQ(ZH)"},"https://github.com/ververica/flink-cdc-connectors/wiki/FAQ(ZH)")),(0,a.kt)("h3",{id:"q1-mongodb-cdc-\u652f\u6301-\u5168\u91cf\u589e\u91cf\u8bfb-\u548c-\u53ea\u8bfb\u589e\u91cf\u5417"},"Q1: MongoDB CDC \u652f\u6301 \u5168\u91cf+\u589e\u91cf\u8bfb \u548c \u53ea\u8bfb\u589e\u91cf\u5417\uff1f"),(0,a.kt)("p",null,"\u652f\u6301\uff0c\u9ed8\u8ba4\u4e3a \u5168\u91cf+\u589e\u91cf \u8bfb\u53d6\uff1b\u4f7f\u7528copy.existing=false\u53c2\u6570\u8bbe\u7f6e\u4e3a\u53ea\u8bfb\u589e\u91cf\u3002"),(0,a.kt)("h3",{id:"q2-mongodb-cdc-\u652f\u6301\u4ece-checkpoint-\u6062\u590d\u5417-\u539f\u7406\u662f\u600e\u4e48\u6837\u7684\u5462"},"Q2: MongoDB CDC \u652f\u6301\u4ece checkpoint \u6062\u590d\u5417? \u539f\u7406\u662f\u600e\u4e48\u6837\u7684\u5462\uff1f"),(0,a.kt)("p",null,"\u652f\u6301\uff0ccheckpoint \u4f1a\u8bb0\u5f55 ChangeStream \u7684 resumeToken\uff0c\u6062\u590d\u7684\u65f6\u5019\u53ef\u4ee5\u901a\u8fc7resumeToken\u91cd\u65b0\u6062\u590dChangeStream\u3002\u5176\u4e2d resumeToken \u5bf9\u5e94 oplog.rs (MongoDB \u53d8\u66f4\u65e5\u5fd7collection) \u7684\u4f4d\u7f6e\uff0coplog.rs \u662f\u4e00\u4e2a\u56fa\u5b9a\u5bb9\u91cf\u7684 collection\u3002\u5f53 resumeToken \u5bf9\u5e94\u7684\u8bb0\u5f55\u5728 oplog.rs \u4e2d\u4e0d\u5b58\u5728\u7684\u65f6\u5019\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0 Invalid resumeToken \u7684\u5f02\u5e38\u3002\u8fd9\u79cd\u60c5\u51b5\uff0c\u5728\u4f7f\u7528\u65f6\u53ef\u4ee5\u8bbe\u7f6e\u5408\u9002oplog.rs\u7684\u96c6\u5408\u5927\u5c0f\uff0c\u907f\u514doplog.rs\u4fdd\u7559\u65f6\u95f4\u8fc7\u77ed\uff0c\u53ef\u4ee5\u53c2\u8003 ",(0,a.kt)("a",{parentName:"p",href:"https://docs.mongodb.com/manual/tutorial/change-oplog-size/"},"https://docs.mongodb.com/manual/tutorial/change-oplog-size/")," \u53e6\u5916\uff0cresumeToken \u53ef\u4ee5\u901a\u8fc7\u65b0\u5230\u7684\u53d8\u66f4\u8bb0\u5f55\u548c heartbeat \u8bb0\u5f55\u6765\u5237\u65b0\u3002"),(0,a.kt)("h3",{id:"q3-mongodb-cdc-\u652f\u6301\u8f93\u51fa--uupdate_before\u66f4\u65b0\u524d\u955c\u50cf\u503c\u6d88\u606f\u5417"},"Q3: MongoDB CDC \u652f\u6301\u8f93\u51fa -U\uff08update_before\uff0c\u66f4\u65b0\u524d\u955c\u50cf\u503c\uff09\u6d88\u606f\u5417\uff1f"),(0,a.kt)("p",null,"MongoDB \u539f\u59cb\u7684 oplog.rs \u53ea\u6709 INSERT, UPDATE, REPLACE, DELETE \u8fd9\u51e0\u79cd\u64cd\u4f5c\u7c7b\u578b\uff0c\u6ca1\u6709\u4fdd\u7559\u66f4\u65b0\u524d\u7684\u4fe1\u606f\uff0c\u4e0d\u80fd\u8f93\u51fa-U \u6d88\u606f\uff0c\u5728 Flink \u4e2d\u53ea\u80fd\u5b9e\u73b0 UPSERT \u8bed\u4e49\u3002\u5728\u4f7f\u7528MongoDBTableSource \u65f6\uff0cFlink planner \u4f1a\u81ea\u52a8\u8fdb\u884c ChangelogNormalize \u4f18\u5316\uff0c\u8865\u9f50\u7f3a\u5931\u7684 -U \u6d88\u606f\uff0c\u8f93\u51fa\u5b8c\u6574\u7684 +I, -U\uff0c +U\uff0c -D \u56db\u79cd\u6d88\u606f\uff0c \u4ee3\u4ef7\u662f ChangelogNormalize \u4f18\u5316\u7684\u4ee3\u4ef7\u662f\u8be5\u8282\u70b9\u4f1a\u4fdd\u5b58\u4e4b\u524d\u6240\u6709 key \u7684\u72b6\u6001\u3002\u6240\u4ee5\uff0c\u5982\u679c\u662f DataStream \u4f5c\u4e1a\u76f4\u63a5\u4f7f\u7528 MongoDBSource\uff0c\u5982\u679c\u6ca1\u6709 Flink planner \u7684\u4f18\u5316\uff0c\u5c06\u4e0d\u4f1a\u81ea\u52a8\u8fdb\u884c ChangelogNormalize\uff0c\u6240\u4ee5\u4e0d\u80fd\u76f4\u63a5\u83b7\u53d6 \u2014U \u6d88\u606f\u3002\u60f3\u8981\u83b7\u53d6\u66f4\u65b0\u524d\u955c\u50cf\u503c\uff0c\u9700\u8981\u81ea\u5df1\u7ba1\u7406\u72b6\u6001\uff0c\u5982\u679c\u4e0d\u5e0c\u671b\u81ea\u5df1\u7ba1\u7406\u72b6\u6001\uff0c\u53ef\u4ee5\u5c06 MongoDBTableSource \u8f6c\u6362\u4e3a ChangelogStream \u6216\u8005 RetractStream\uff0c\u501f\u52a9 Flink planner \u7684\u4f18\u5316\u80fd\u529b\u8865\u9f50\u66f4\u65b0\u524d\u955c\u50cf\u503c\uff0c\u793a\u4f8b\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'    tEnv.executeSql("CREATE TABLE orders ( ... ) WITH ( \'connector\'=\'mongodb-cdc\',... )");\n\n    Table table = tEnv.from("orders")\n            .select($("*"));\n\n    tEnv.toChangelogStream(table)\n            .print()\n            .setParallelism(1);\n\n    env.execute();\n')),(0,a.kt)("h3",{id:"q4-mongodb-cdc-\u652f\u6301\u8ba2\u9605\u591a\u4e2a-collection-\u5417"},"Q4: MongoDB CDC \u652f\u6301\u8ba2\u9605\u591a\u4e2a collection \u5417\uff1f"),(0,a.kt)("p",null,"\u4ec5\u652f\u6301\u8ba2\u9605\u6574\u5e93\u7684 collection\uff0c\u7b5b\u9009\u90e8\u5206 collection \u529f\u80fd\u8fd8\u4e0d\u652f\u6301\uff0c\u4f8b\u5982\u914d\u7f6e database \u4e3a 'mgdb'\uff0ccollection \u4e3a\u7a7a\u5b57\u7b26\u4e32\uff0c\u5219\u4f1a\u8ba2\u9605 'mgdb' \u5e93\u4e0b\u6240\u6709 collection\u3002"),(0,a.kt)("h3",{id:"q5-mongodb-cdc-\u652f\u6301\u8bbe\u7f6e\u591a\u5e76\u53d1\u5ea6\u8bfb\u53d6\u5417"},"Q5: MongoDB CDC \u652f\u6301\u8bbe\u7f6e\u591a\u5e76\u53d1\u5ea6\u8bfb\u53d6\u5417\uff1f"),(0,a.kt)("p",null,"\u76ee\u524d\u8fd8\u4e0d\u652f\u6301\u3002"),(0,a.kt)("h3",{id:"q6-mongodb-cdc-\u652f\u6301-mongodb-\u7684\u7248\u672c\u662f\u54ea\u4e9b"},"Q6: MongoDB CDC \u652f\u6301 MongoDB \u7684\u7248\u672c\u662f\u54ea\u4e9b\uff1f"),(0,a.kt)("p",null,"MongoDB CDC \u57fa\u4e8e ChangeStream \u7279\u6027\u5b9e\u73b0\uff0cChangeStream \u662f MongoDB 3.6 \u63a8\u51fa\u7684\u65b0\u7279\u6027\u3002MongoDB CDC \u7406\u8bba\u4e0a\u652f\u6301 3.6 \u4ee5\u4e0a\u7248\u672c\uff0c\u5efa\u8bae\u8fd0\u884c\u7248\u672c >= 4.0, \u5728\u4f4e\u4e8e3.6\u7248\u672c\u6267\u884c\u65f6\uff0c\u4f1a\u51fa\u73b0\u9519\u8bef: Unrecognized pipeline stage name: '$changeStream' \u3002"),(0,a.kt)("h3",{id:"q7-mongodb-cdc-\u652f\u6301-mongodb-\u7684\u8fd0\u884c\u6a21\u5f0f\u662f\u4ec0\u4e48"},"Q7: MongoDB CDC \u652f\u6301 MongoDB \u7684\u8fd0\u884c\u6a21\u5f0f\u662f\u4ec0\u4e48\uff1f"),(0,a.kt)("p",null,"ChangeStream \u9700\u8981 MongoDB \u4ee5\u526f\u672c\u96c6\u6216\u8005\u5206\u7247\u6a21\u5f0f\u8fd0\u884c\uff0c\u672c\u5730\u6d4b\u8bd5\u53ef\u4ee5\u4f7f\u7528\u5355\u673a\u7248\u526f\u672c\u96c6 rs.initiate() \u3002\u5728 standalone \u6a21\u5f0f\u4e0b\u4f1a\u51fa\u73b0\u9519\u8bef\uff1aThe $changestage is only supported on replica sets."),(0,a.kt)("h3",{id:"q8-mongodb-cdc-\u62a5\u9519\u7528\u6237\u540d\u5bc6\u7801\u9519\u8bef-\u4f46\u5176\u4ed6\u7ec4\u4ef6\u4f7f\u7528\u8be5\u7528\u6237\u540d\u5bc6\u7801\u90fd\u80fd\u6b63\u5e38\u8fde\u63a5\u8fd9\u662f\u4ec0\u4e48\u539f\u56e0"},"Q8: MongoDB CDC \u62a5\u9519\u7528\u6237\u540d\u5bc6\u7801\u9519\u8bef, \u4f46\u5176\u4ed6\u7ec4\u4ef6\u4f7f\u7528\u8be5\u7528\u6237\u540d\u5bc6\u7801\u90fd\u80fd\u6b63\u5e38\u8fde\u63a5\uff0c\u8fd9\u662f\u4ec0\u4e48\u539f\u56e0\uff1f"),(0,a.kt)("p",null,"\u5982\u679c\u7528\u6237\u662f\u521b\u5efa\u5728\u9700\u8981\u8fde\u63a5\u7684db \u4e0b\uff0c\u9700\u8981\u5728with\u53c2\u6570\u91cc\u52a0\u4e0b 'connection.options' = 'authSource=\u7528\u6237\u6240\u5728\u7684db'\u3002"),(0,a.kt)("h3",{id:"q9-mongodb-cdc-\u662f\u5426\u652f\u6301-debezium-\u76f8\u5173\u7684\u53c2\u6570"},"Q9: MongoDB CDC \u662f\u5426\u652f\u6301 debezium \u76f8\u5173\u7684\u53c2\u6570\uff1f"),(0,a.kt)("p",null,"\u4e0d\u652f\u6301\u7684\uff0c\u56e0\u4e3a MongoDB CDC \u8fde\u63a5\u5668\u662f\u5728 Flink CDC \u9879\u76ee\u4e2d\u72ec\u7acb\u5f00\u53d1\uff0c\u5e76\u4e0d\u4f9d\u8d56Debezium\u9879\u76ee\uff0c\u6240\u4ee5\u4e0d\u652f\u6301\u3002"),(0,a.kt)("h3",{id:"q10mongodb-cdc-\u5168\u91cf\u8bfb\u53d6\u9636\u6bb5\u4f5c\u4e1a\u5931\u8d25\u540e\u53ef\u4ee5\u4ece-checkpoint-\u7ee7\u7eed\u8bfb\u53d6\u5417"},"Q10\uff1aMongoDB CDC \u5168\u91cf\u8bfb\u53d6\u9636\u6bb5\uff0c\u4f5c\u4e1a\u5931\u8d25\u540e\uff0c\u53ef\u4ee5\u4ece checkpoint \u7ee7\u7eed\u8bfb\u53d6\u5417\uff1f"),(0,a.kt)("p",null,"MongoDB CDC \u5168\u91cf\u8bfb\u53d6\u9636\u6bb5\u662f\u4e0d\u505a checkpoint \u7684\uff0c\u76f4\u5230\u5168\u91cf\u9636\u6bb5\u8bfb\u53d6\u5b8c\u540e\u624d\u5f00\u59cb\u4f5c checkpoint\uff0c\u5982\u679c\u5728\u5168\u91cf\u8bfb\u53d6\u9636\u6bb5\u5931\u8d25\uff0cMongoDB CDC \u4f1a\u91cd\u65b0\u8bfb\u53d6\u5b58\u91cf\u6570\u636e\u3002"),(0,a.kt)("h2",{id:"mysql-cdc-faq"},"MySQL CDC FAQ"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"MySQL CDC FAQ \u53c2\u8003 \u672c\u6587\u4f5c\u4e86\u5206\u7c7b\u5904\u7406")),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/ververica/flink-cdc-connectors/wiki/FAQ(ZH)"},"https://github.com/ververica/flink-cdc-connectors/wiki/FAQ(ZH)")),(0,a.kt)("h3",{id:"q1-\u4f7f\u7528cdc-2x\u7248\u672c\u53ea\u80fd\u8bfb\u53d6\u5168\u91cf\u6570\u636e\u65e0\u6cd5\u8bfb\u53d6\u589e\u91cfbinlog-\u6570\u636e\u600e\u4e48\u56de\u4e8b"},"Q1: \u4f7f\u7528CDC 2.x\u7248\u672c\uff0c\u53ea\u80fd\u8bfb\u53d6\u5168\u91cf\u6570\u636e\uff0c\u65e0\u6cd5\u8bfb\u53d6\u589e\u91cf\uff08binlog\uff09 \u6570\u636e\uff0c\u600e\u4e48\u56de\u4e8b\uff1f"),(0,a.kt)("p",null,"CDC 2.0 \u652f\u6301\u4e86\u65e0\u9501\u7b97\u6cd5\uff0c\u652f\u6301\u5e76\u53d1\u8bfb\u53d6\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u5168\u91cf\u6570\u636e + \u589e\u91cf\u6570\u636e\u7684\u987a\u5e8f\u6027\uff0c\u4f9d\u8d56Flink \u7684 checkpoint\u673a\u5236\uff0c\u6240\u4ee5\u4f5c\u4e1a\u9700\u8981\u914d\u7f6e checkpoint\u3002 SQL \u4f5c\u4e1a\u4e2d\u914d\u7f6e\u65b9\u5f0f\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"Flink SQL> SET 'execution.checkpointing.interval' = '3s';    \n")),(0,a.kt)("p",null,"DataStream \u4f5c\u4e1a\u914d\u7f6e\u65b9\u5f0f\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\nenv.enableCheckpointing(3000);  \n")),(0,a.kt)("h3",{id:"q2-\u4f7f\u7528-mysql-cdc\u589e\u91cf\u9636\u6bb5\u8bfb\u53d6\u51fa\u6765\u7684-timestamp-\u5b57\u6bb5\u65f6\u533a\u76f8\u5dee8\u5c0f\u65f6\u600e\u4e48\u56de\u4e8b\u5462"},"Q2: \u4f7f\u7528 MySQL CDC\uff0c\u589e\u91cf\u9636\u6bb5\u8bfb\u53d6\u51fa\u6765\u7684 timestamp \u5b57\u6bb5\u65f6\u533a\u76f8\u5dee8\u5c0f\u65f6\uff0c\u600e\u4e48\u56de\u4e8b\u5462\uff1f"),(0,a.kt)("p",null,"\u5728\u89e3\u6790binlog\u6570\u636e\u4e2d\u7684timestamp\u5b57\u6bb5\u65f6\uff0ccdc \u4f1a\u4f7f\u7528\u5230\u4f5c\u4e1a\u91cc\u914d\u7f6e\u7684server-time-zone\u4fe1\u606f\uff0c\u4e5f\u5c31\u662fMySQL\u670d\u52a1\u5668\u7684\u65f6\u533a\uff0c\u5982\u679c\u8fd9\u4e2a\u65f6\u533a\u6ca1\u6709\u548c\u4f60\u7684MySQL\u670d\u52a1\u5668\u65f6\u533a\u4e00\u81f4\uff0c\u5c31\u4f1a\u51fa\u73b0\u8fd9\u4e2a\u95ee\u9898\u3002"),(0,a.kt)("p",null,"\u6b64\u5916\uff0c\u5982\u679c\u662f\u5728DataStream\u4f5c\u4e1a\u4e2d\u81ea\u5b9a\u4e49\u5217\u5316\u5668\u5982 MyDeserializer implements DebeziumDeserializationSchema, \u81ea\u5b9a\u4e49\u7684\u5e8f\u5217\u5316\u5668\u5728\u89e3\u6790 timestamp \u7c7b\u578b\u6570\u636e\u65f6\uff0c\u9700\u8981\u53c2\u8003\u4e0b RowDataDebeziumDeserializeSchema \u4e2d\u5bf9 timestamp \u7c7b\u578b\u7684\u89e3\u6790\uff0c\u7528\u65f6\u7ed9\u5b9a\u7684\u65f6\u533a\u4fe1\u606f\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"private TimestampData convertToTimestamp(Object dbzObj, Schema schema) {\n        if (dbzObj instanceof Long) {\n            switch (schema.name()) {\n                case Timestamp.SCHEMA_NAME:\n                    return TimestampData.fromEpochMillis((Long) dbzObj);\n                case MicroTimestamp.SCHEMA_NAME:\n                    long micro = (long) dbzObj;\n                    return TimestampData.fromEpochMillis(micro / 1000, (int) (micro % 1000 * 1000));\n                case NanoTimestamp.SCHEMA_NAME:\n                    long nano = (long) dbzObj;\n                    return TimestampData.fromEpochMillis(nano / 1000_000, (int) (nano % 1000_000));\n            }\n        }\n        LocalDateTime localDateTime = TemporalConversions.toLocalDateTime(dbzObj, serverTimeZone);\n        return TimestampData.fromLocalDateTime(localDateTime);\n    }\n")),(0,a.kt)("h3",{id:"q3-mysql-cdc\u652f\u6301\u76d1\u542c\u4ece\u5e93\u5417\u4ece\u5e93\u9700\u8981\u5982\u4f55\u914d\u7f6e"},"Q3: mysql cdc\u652f\u6301\u76d1\u542c\u4ece\u5e93\u5417\uff1f\u4ece\u5e93\u9700\u8981\u5982\u4f55\u914d\u7f6e\uff1f"),(0,a.kt)("p",null," \u652f\u6301\u7684\uff0c\u4ece\u5e93\u9700\u8981\u914d\u7f6e log-slave-updates = 1 \u4f7f\u4ece\u5b9e\u4f8b\u4e5f\u80fd\u5c06\u4ece\u4e3b\u5b9e\u4f8b\u540c\u6b65\u7684\u6570\u636e\u5199\u5165\u4ece\u5e93\u7684 binlog \u6587\u4ef6\u4e2d\uff0c\u5982\u679c\u4e3b\u5e93\u5f00\u542f\u4e86gtid mode\uff0c\u4ece\u5e93\u4e5f\u9700\u8981\u5f00\u542f\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"log-slave-updates = 1\ngtid_mode = on \nenforce_gtid_consistency = on \n")),(0,a.kt)("h3",{id:"q4-\u6211\u60f3\u540c\u6b65\u5206\u5e93\u5206\u8868\u5e94\u8be5\u5982\u4f55\u914d\u7f6e"},"Q4: \u6211\u60f3\u540c\u6b65\u5206\u5e93\u5206\u8868\uff0c\u5e94\u8be5\u5982\u4f55\u914d\u7f6e\uff1f"),(0,a.kt)("p",null,"\u901a\u8fc7 mysql cdc \u8868\u7684with\u53c2\u6570\u4e2d\uff0c\u8868\u540d\u548c\u5e93\u540d\u5747\u652f\u6301\u6b63\u5219\u914d\u7f6e\uff0c\u6bd4\u5982 'table-name' ='user_.' \u53ef\u4ee5\u5339\u914d\u8868\u540d user_1, user_2,user_a\u8868\uff0c\u6ce8\u610f\u6b63\u5219\u5339\u914d\u4efb\u610f\u5b57\u7b26\u662f'.' \u800c\u4e0d\u662f '*', \u5176\u4e2d\u70b9\u53f7\u8868\u793a\u4efb\u610f\u5b57\u7b26\uff0c\u661f\u53f7\u8868\u793a0\u4e2a\u6216\u591a\u4e2a\uff0cdatabase-name\u4e5f\u5982\u6b64\u3002"),(0,a.kt)("h3",{id:"q5-\u6211\u60f3\u8df3\u8fc7\u5b58\u91cf\u8bfb\u53d6\u9636\u6bb5\u53ea\u8bfb\u53d6-binlog-\u6570\u636e\u600e\u4e48\u914d\u7f6e"},"Q5: \u6211\u60f3\u8df3\u8fc7\u5b58\u91cf\u8bfb\u53d6\u9636\u6bb5\uff0c\u53ea\u8bfb\u53d6 binlog \u6570\u636e\uff0c\u600e\u4e48\u914d\u7f6e\uff1f"),(0,a.kt)("p",null,"\u5728 mysql cdc \u8868\u7684 with \u53c2\u6570\u4e2d\u6307\u5b9a 'scan.startup.mode' = 'latest-offset' \u5373\u53ef\u3002"),(0,a.kt)("h3",{id:"q6-\u6211\u60f3\u83b7\u53d6\u6570\u636e\u5e93\u4e2d\u7684-ddl\u4e8b\u4ef6\u600e\u4e48\u529e\u6709demo\u5417"},"Q6: \u6211\u60f3\u83b7\u53d6\u6570\u636e\u5e93\u4e2d\u7684 DDL\u4e8b\u4ef6\uff0c\u600e\u4e48\u529e\uff0c\u6709demo\u5417\uff1f"),(0,a.kt)("p",null,"CDC 2.1 \u7248\u672c\u63d0\u4f9b\u4e86 DataStream API\uff1a MysqlSource\uff0c \u7528\u6237\u53ef\u4ee5\u914d\u7f6e includeSchemaChanges \u8868\u793a\u662f\u5426\u9700\u8981DDL \u4e8b\u4ef6\uff0c\u83b7\u53d6\u5230 DDL \u4e8b\u4ef6\u540e\u81ea\u5df1\u5199\u4ee3\u7801\u5904\u7406\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},' public void consumingAllEvents() throws Exception {\n        inventoryDatabase.createAndInitialize();\n        MySqlSource<String> mySqlSource =\n                MySqlSource.<String>builder()\n                        .hostname(MYSQL_CONTAINER.getHost())\n                        .port(MYSQL_CONTAINER.getDatabasePort())\n                        .databaseList(inventoryDatabase.getDatabaseName())\n                        .tableList(inventoryDatabase.getDatabaseName() + ".products")\n                        .username(inventoryDatabase.getUsername())\n                        .password(inventoryDatabase.getPassword())\n                        .serverId("5401-5404")\n                        .deserializer(new JsonDebeziumDeserializationSchema())\n                        .includeSchemaChanges(true) // \u8fd9\u91cc\u914d\u7f6e\uff0c\u8f93\u51faDDL\u4e8b\u4ef6\n                        .build();\n                ... // \u5176\u4ed6\u5904\u7406\u903b\u8f91                        \n    }\n')),(0,a.kt)("h3",{id:"q7-mysql-\u6574\u5e93\u540c\u6b65\u600e\u4e48\u505a-flink-cdc-\u652f\u6301\u5417"},"Q7: MySQL \u6574\u5e93\u540c\u6b65\u600e\u4e48\u505a, Flink CDC \u652f\u6301\u5417\uff1f"),(0,a.kt)("p",null,"Flink CDC \u652f\u6301\u7684\uff0cQ6 \u4e2d \u63d0\u4f9b\u7684 DataStream API \u5df2\u7ecf\u53ef\u4ee5\u8ba9\u7528\u6237\u83b7\u53d6 DDL \u53d8\u66f4\u4e8b\u4ef6\u548c\u6570\u636e\u53d8\u66f4\u4e8b\u4ef6\uff0c\u7528\u6237\u9700\u8981\u5728\u6b64\u57fa\u7840\u4e0a\uff0c\u6839\u636e\u81ea\u5df1\u7684\u4e1a\u52a1\u903b\u8f91\u548c\u4e0b\u6e38\u5b58\u50a8\u8fdb\u884c DataStream \u4f5c\u4e1a\u5f00\u53d1\u3002"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"note:\n\u5728 FFA2021 \u5927\u4f1a\u4e0a\u4e91\u90aa\u8001\u5e08\u5c55\u793a\u4e86\u56e2\u961f\u89e3\u51b3 schema \u53d8\u66f4\u7b49\u95ee\u9898\uff0c\u672a\u6765\u6709\u8ba1\u5212\u5f00\u6e90\u3002"),(0,a.kt)("p",{parentName:"blockquote"},(0,a.kt)("a",{parentName:"p",href:"https://developer.aliyun.com/special/ffa2021/live?spm=a2c6h.12873639.0.0.617e57999nfFsw#"},"https://developer.aliyun.com/special/ffa2021/live?spm=a2c6h.12873639.0.0.617e57999nfFsw#")),(0,a.kt)("p",{parentName:"blockquote"},(0,a.kt)("a",{parentName:"p",href:"https://www.bilibili.com/video/BV1tT4y1m7zG?p=2"},"https://www.bilibili.com/video/BV1tT4y1m7zG?p=2"))),(0,a.kt)("h3",{id:"q8-\u540c\u4e00\u4e2a\u5b9e\u4f8b\u4e0b\u67d0\u4e2a\u5e93\u7684\u8868\u65e0\u6cd5\u540c\u6b65\u589e\u91cf\u6570\u636e\u5176\u4ed6\u5e93\u90fd\u53ef\u4ee5\u8fd9\u662f\u4e3a\u5565"},"Q8: \u540c\u4e00\u4e2a\u5b9e\u4f8b\u4e0b\uff0c\u67d0\u4e2a\u5e93\u7684\u8868\u65e0\u6cd5\u540c\u6b65\u589e\u91cf\u6570\u636e\uff0c\u5176\u4ed6\u5e93\u90fd\u53ef\u4ee5\uff0c\u8fd9\u662f\u4e3a\u5565\uff1f"),(0,a.kt)("p",null,"\u8fd9\u4e2a\u95ee\u9898\u662f\u56e0\u4e3a mysql \u670d\u52a1\u5668 \u53ef\u4ee5\u914d\u7f6e binlog \u8fc7\u6ee4\u5668\uff0c\u5ffd\u7565\u4e86\u67d0\u4e9b\u5e93\u7684 binlog\u3002\u7528\u6237\u53ef\u4ee5\u901a\u8fc7 show master status \u547d\u4ee4\u67e5\u770b Binlog_Ignore_DB \u548c Binlog_Do_DB\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"mysql> show master status;\n+------------------+----------+--------------+------------------+----------------------+\n| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set    |\n+------------------+----------+--------------+------------------+----------------------+\n| mysql-bin.000006 |     4594 |              |                  | xxx:1-15             |\n+------------------+----------+--------------+------------------+----------------------+\n")),(0,a.kt)("h3",{id:"q9-\u4f5c\u4e1a\u62a5\u9519-the-connector-is-trying-to-read-binlog-starting-at-gtids-xxx-and-binlog-file-binlog000064-pos89887992-skipping-4-events-plus-1-rows-but-this-is-no-longer-available-on-the-server-reconfigure-the-connector-to-use-a-snapshot-when-needed\u600e\u4e48\u529e\u5462"},"Q9: \u4f5c\u4e1a\u62a5\u9519 The connector is trying to read binlog starting at GTIDs xxx and binlog file 'binlog.000064', pos=89887992, skipping 4 events plus 1 rows, but this is no longer available on the server. Reconfigure the connector to use a snapshot when needed\uff0c\u600e\u4e48\u529e\u5462\uff1f"),(0,a.kt)("p",null,"\u51fa\u73b0\u8fd9\u79cd\u9519\u8bef\u662f \u4f5c\u4e1a\u6b63\u5728\u8bfb\u53d6\u7684binlog\u6587\u4ef6\u5728 MySQL \u670d\u52a1\u5668\u5df2\u7ecf\u88ab\u6e05\u7406\u6389\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e00\u822c\u662f MySQL \u670d\u52a1\u5668\u4e0a\u4fdd\u7559\u7684 binlog \u6587\u4ef6\u8fc7\u671f\u65f6\u95f4\u592a\u77ed\uff0c\u53ef\u4ee5\u5c06\u8be5\u503c\u8bbe\u7f6e\u5927\u4e00\u70b9\uff0c\u6bd4\u59827\u5929\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"mysql> show variables like 'expire_logs_days';\nmysql> set global expire_logs_days=7;\n")),(0,a.kt)("p",null,"\u8fd8\u6709\u79cd\u60c5\u51b5\u662f flink cdc \u4f5c\u4e1a\u6d88\u8d39binlog \u592a\u6162\uff0c\u8fd9\u79cd\u4e00\u822c\u5206\u914d\u8db3\u591f\u7684\u8d44\u6e90\u5373\u53ef\u3002"),(0,a.kt)("h3",{id:"q10-\u4f5c\u4e1a\u62a5\u9519-connectexception-a-slave-with-the-same-server_uuidserver_id-as-this-slave-has-connected-to-the-master\u600e\u4e48\u529e\u5462"},"Q10: \u4f5c\u4e1a\u62a5\u9519 ConnectException: A slave with the same server_uuid/server_id as this slave has connected to the master\uff0c\u600e\u4e48\u529e\u5462\uff1f"),(0,a.kt)("p",null,"\u51fa\u73b0\u8fd9\u79cd\u9519\u8bef\u662f \u4f5c\u4e1a\u91cc\u4f7f\u7528\u7684 server id \u548c\u5176\u4ed6\u4f5c\u4e1a\u6216\u5176\u4ed6\u540c\u6b65\u5de5\u5177\u4f7f\u7528\u7684server id \u51b2\u7a81\u4e86\uff0cserver id \u9700\u8981\u5168\u5c40\u552f\u4e00\uff0cserver id \u662f\u4e00\u4e2aint\u7c7b\u578b\u6574\u6570\u3002 \u5728 CDC 2.x \u7248\u672c\u4e2d\uff0csource \u7684\u6bcf\u4e2a\u5e76\u53d1\u90fd\u9700\u8981\u4e00\u4e2aserver id\uff0c\u5efa\u8bae\u5408\u7406\u89c4\u5212\u597dserver id\uff0c\u6bd4\u5982\u4f5c\u4e1a\u7684 source \u8bbe\u7f6e\u6210\u4e86\u56db\u4e2a\u5e76\u53d1\uff0c\u53ef\u4ee5\u914d\u7f6e 'server-id' = '5001-5004', \u8fd9\u6837\u6bcf\u4e2a source task \u5c31\u4e0d\u4f1a\u51b2\u7a81\u4e86\u3002"),(0,a.kt)("h3",{id:"q11-\u4f5c\u4e1a\u62a5\u9519-connectexception-received-dml--for-processing-binlog-probably-contains-events-generated-with-statement-or-mixed-based-replication-format\u600e\u4e48\u529e\u5462"},"Q11: \u4f5c\u4e1a\u62a5\u9519 ConnectException: Received DML \u2018\u2026\u2019 for processing, binlog probably contains events generated with statement or mixed based replication format\uff0c\u600e\u4e48\u529e\u5462\uff1f"),(0,a.kt)("p",null,"\u51fa\u73b0\u8fd9\u79cd\u9519\u8bef\u662f MySQL \u670d\u52a1\u5668\u914d\u7f6e\u4e0d\u5bf9\uff0c\u9700\u8981\u68c0\u67e5\u4e0b binlog_format \u662f\u4e0d\u662f ROW? \u53ef\u4ee5\u901a\u8fc7\u4e0b\u9762\u7684\u547d\u4ee4\u67e5\u770b"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"mysql> show variables like '%binlog_format%'; \n")),(0,a.kt)("h3",{id:"q12-\u4f5c\u4e1a\u62a5\u9519-mysql80-public-key-retrieval-is-not-allowed-\u600e\u4e48\u529e\u5462-"},"Q12: \u4f5c\u4e1a\u62a5\u9519 Mysql8.0 Public Key Retrieval is not allowed\uff0c \u600e\u4e48\u529e\u5462 ?"),(0,a.kt)("p",null,"\u8fd9\u662f\u56e0\u4e3a\u7528\u6237\u914d\u7f6e\u7684 MySQL \u7528\u6237 \u4f7f\u7528\u7684\u662f sha256 \u5bc6\u7801\u8ba4\u8bc1\uff0c\u9700\u8981 TLS \u7b49\u534f\u8bae\u4f20\u8f93\u5bc6\u7801\u3002\u4e00\u79cd\u7b80\u5355\u7684\u65b9\u6cd5\u662f\u4f7f\u5141\u8bb8 MySQL\u7528\u6237 \u652f\u6301\u539f\u59cb\u5bc6\u7801\u65b9\u5f0f\u8bbf\u95ee\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"mysql> ALTER USER 'username'@'localhost' IDENTIFIED WITH mysql_native_password BY 'password';\nmysql> FLUSH PRIVILEGES; \n")),(0,a.kt)("h3",{id:"q13-\u4f5c\u4e1a\u62a5\u9519-eventdatadeserializationexception-failed-to-deserialize-data-of-eventheaderv4--caused-by-javanetsocketexception-connection-reset-\u600e\u4e48\u529e\u5462-"},"Q13: \u4f5c\u4e1a\u62a5\u9519 EventDataDeserializationException: Failed to deserialize data of EventHeaderV4 .... Caused by: java.net.SocketException: Connection reset\uff0c \u600e\u4e48\u529e\u5462 ?"),(0,a.kt)("p",null,"\u8fd9\u4e2a\u95ee\u9898\u4e00\u822c\u662f\u7f51\u7edc\u539f\u56e0\u5f15\u8d77\uff0c\u9996\u5148\u6392\u67e5flink \u96c6\u7fa4 \u5230 \u6570\u636e\u5e93\u4e4b\u95f4\u7684\u7f51\u7edc\u60c5\u51b5\uff0c\u5176\u6b21\u53ef\u4ee5\u8c03\u5927 MySQL \u670d\u52a1\u5668\u7684\u7f51\u7edc\u53c2\u6570\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"mysql> set global slave_net_timeout = 120; \nmysql> set global thread_pool_idle_timeout = 120;\n")),(0,a.kt)("h3",{id:"q14-\u4f5c\u4e1a\u62a5\u9519-the-slave-is-connecting-using-change-master-to-master_auto_position--1-but-the-master-has-purged-binary-logs-containing-gtids-that-the-slave-requires-\u600e\u4e48\u529e\u5462-"},"Q14: \u4f5c\u4e1a\u62a5\u9519 The slave is connecting using CHANGE MASTER TO MASTER_AUTO_POSITION = 1, but the master has purged binary logs containing GTIDs that the slave requires. \u600e\u4e48\u529e\u5462 ?"),(0,a.kt)("p",null,"\u51fa\u73b0\u8fd9\u4e2a\u95ee\u9898\u7684\u539f\u56e0\u662f\u7684\u4f5c\u4e1a\u5168\u91cf\u9636\u6bb5\u8bfb\u53d6\u592a\u6162\uff0c\u5728\u5168\u91cf\u9636\u6bb5\u8bfb\u5b8c\u540e\uff0c\u4e4b\u524d\u8bb0\u5f55\u7684\u5168\u91cf\u9636\u6bb5\u5f00\u59cb\u65f6\u7684 gtid \u4f4d\u70b9\u5df2\u7ecf\u88ab mysql \u6e05\u7406\u6389\u4e86\u3002\u8fd9\u79cd\u53ef\u4ee5\u589e\u5927 mysql \u670d\u52a1\u5668\u4e0a binlog \u6587\u4ef6\u7684\u4fdd\u5b58\u65f6\u95f4\uff0c\u4e5f\u53ef\u4ee5\u8c03\u5927 source \u7684\u5e76\u53d1\uff0c\u8ba9\u5168\u91cf\u9636\u6bb5\u8bfb\u53d6\u66f4\u5feb\u3002"),(0,a.kt)("h3",{id:"q15-\u5728-datastream-api\u4e2d\u6784\u5efamysql-cdc\u6e90\u65f6\u5982\u4f55\u914d\u7f6etablelist\u9009\u9879"},"Q15: \u5728 DataStream API\u4e2d\u6784\u5efaMySQL CDC\u6e90\u65f6\u5982\u4f55\u914d\u7f6etableList\u9009\u9879\uff1f"),(0,a.kt)("p",null,"tableList\u9009\u9879\u8981\u6c42\u8868\u540d\u4f7f\u7528\u6570\u636e\u5e93\u540d\uff0c\u800c\u4e0d\u662fDataStream API\u4e2d\u7684\u8868\u540d\u3002\u5bf9\u4e8eMySQL CDC\u6e90\u4ee3\u7801\uff0ctableList\u9009\u9879\u503c\u5e94\u8be5\u7c7b\u4f3c\u4e8e\u2018my_db.my_table\u2019\u3002"),(0,a.kt)("h2",{id:"postgres-cdc-faq"},"Postgres CDC FAQ"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Postgres CDC FAQ \u53c2\u8003 \u672c\u6587\u4f5c\u4e86\u5206\u7c7b\u5904\u7406")),(0,a.kt)("h3",{id:"q1-\u53d1\u73b0-pg-\u670d\u52a1\u5668\u78c1\u76d8\u4f7f\u7528\u7387\u9ad8wal-\u4e0d\u91ca\u653e-\u662f\u4ec0\u4e48\u539f\u56e0"},"Q1: \u53d1\u73b0 PG \u670d\u52a1\u5668\u78c1\u76d8\u4f7f\u7528\u7387\u9ad8\uff0cWAL \u4e0d\u91ca\u653e \u662f\u4ec0\u4e48\u539f\u56e0\uff1f"),(0,a.kt)("p",null,"Flink Postgres CDC \u53ea\u4f1a\u5728 checkpoint \u5b8c\u6210\u7684\u65f6\u5019\u66f4\u65b0 Postgres slot \u4e2d\u7684 LSN\u3002\u56e0\u6b64\u5982\u679c\u53d1\u73b0\u78c1\u76d8\u4f7f\u7528\u7387\u9ad8\u7684\u60c5\u51b5\u4e0b\uff0c\u8bf7\u5148\u786e\u8ba4 checkpoint \u662f\u5426\u5f00\u542f\u3002"),(0,a.kt)("h3",{id:"q2-flink-postgres-cdc-\u540c\u6b65-postgres-\u4e2d\u5c06-\u8d85\u8fc7\u6700\u5927\u7cbe\u5ea63818\u7684-decimal-\u7c7b\u578b\u8fd4\u56de-null"},"Q2: Flink Postgres CDC \u540c\u6b65 Postgres \u4e2d\u5c06 \u8d85\u8fc7\u6700\u5927\u7cbe\u5ea6\uff0838\uff0c18\uff09\u7684 DECIMAL \u7c7b\u578b\u8fd4\u56de NULL"),(0,a.kt)("p",null,"Flink \u4e2d\u5982\u679c\u6536\u5230\u6570\u636e\u7684 precision \u5927\u4e8e\u5728 Flink \u4e2d\u58f0\u660e\u7684\u7c7b\u578b\u7684 precision \u65f6\uff0c\u4f1a\u5c06\u6570\u636e\u5904\u7406\u6210 NULL\u3002\u6b64\u65f6\u53ef\u4ee5\u914d\u7f6e\u76f8\u5e94'debezium.decimal.handling.mode' = 'string' \u5c06\u8bfb\u53d6\u7684\u6570\u636e\u7528 STRING \u7c7b\u578b \u6765\u5904\u7406\u3002"),(0,a.kt)("h3",{id:"q3-flink-postgres-cdc-\u63d0\u793a\u672a\u4f20\u8f93-toast-\u6570\u636e\u662f\u4ec0\u4e48\u539f\u56e0"},"Q3: Flink Postgres CDC \u63d0\u793a\u672a\u4f20\u8f93 TOAST \u6570\u636e\uff0c\u662f\u4ec0\u4e48\u539f\u56e0\uff1f"),(0,a.kt)("p",null,"\u8bf7\u5148\u786e\u4fdd REPLICA IDENTITY \u662f FULL\u3002 TOAST \u7684\u6570\u636e\u6bd4\u8f83\u5927\uff0c\u4e3a\u4e86\u8282\u7701 wal \u7684\u5927\u5c0f\uff0c\u5982\u679c TOAST \u6570\u636e\u6ca1\u6709\u53d8\u66f4\uff0c\u90a3\u4e48 wal2json plugin \u5c31\u4e0d\u4f1a\u5728\u66f4\u65b0\u540e\u7684\u6570\u636e\u4e2d\u5e26\u4e0a toast \u6570\u636e\u3002\u4e3a\u4e86\u907f\u514d\u8fd9\u4e2a\u95ee\u9898\uff0c\u53ef\u4ee5\u901a\u8fc7 'debezium.schema.refresh.mode'='columns_diff_exclude_unchanged_toast'\u6765\u89e3\u51b3\u3002"),(0,a.kt)("h3",{id:"q4-\u4f5c\u4e1a\u62a5\u9519-replication-slot-xxxx-is-active-\u600e\u4e48\u529e"},'Q4: \u4f5c\u4e1a\u62a5\u9519 Replication slot "xxxx" is active\uff0c \u600e\u4e48\u529e\uff1f'),(0,a.kt)("p",null,"\u5f53\u524d Flink Postgres CDC \u5728\u4f5c\u4e1a\u9000\u51fa\u540e\u5e76\u4e0d\u4f1a\u624b\u52a8\u91ca\u653e slot\uff0c\u6709\u4e24\u79cd\u65b9\u5f0f\u53ef\u4ee5\u89e3\u51b3\u8be5\u95ee\u9898"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u524d\u5f80 Postgres \u4e2d\u624b\u52a8\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"select pg_drop_replication_slot('rep_slot');\n    ERROR:  replication slot \"rep_slot\" is active for PID 162564\nselect pg_terminate_backend(162564); select pg_drop_replication_slot('rep_slot');\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"pg source with \u53c2\u6570\u4e2d\u6dfb\u52a0 'debezium.slot.drop.on.stop' = 'true'\uff0c\u5728\u4f5c\u4e1a\u505c\u6b62\u540e\u81ea\u52a8\u6e05\u7406 slot")),(0,a.kt)("h3",{id:"q5-\u4f5c\u4e1a\u6709\u810f\u6570\u636e\u6bd4\u5982\u975e\u6cd5\u7684\u65e5\u671f\u6709\u53c2\u6570\u53ef\u4ee5\u914d\u7f6e\u53ef\u4ee5\u8fc7\u6ee4\u5417"},"Q5: \u4f5c\u4e1a\u6709\u810f\u6570\u636e\uff0c\u6bd4\u5982\u975e\u6cd5\u7684\u65e5\u671f\uff0c\u6709\u53c2\u6570\u53ef\u4ee5\u914d\u7f6e\u53ef\u4ee5\u8fc7\u6ee4\u5417\uff1f"),(0,a.kt)("p",null,"\u53ef\u4ee5\u7684\uff0c\u53ef\u4ee5\u5728 Flink CDC \u8868\u7684with \u53c2\u6570\u91cc \u52a0\u4e0b 'debezium.event.deserialization.failure.handling.mode'='warn' \u53c2\u6570\uff0c\u8df3\u8fc7\u810f\u6570\u636e\uff0c\u5c06\u810f\u6570\u636e\u6253\u5370\u5230WARN\u65e5\u5fd7\u91cc\u3002 \u4e5f\u53ef\u4ee5\u914d\u7f6e 'debezium.event.deserialization.failure.handling.mode'='ignore'\uff0c \u76f4\u63a5\u8df3\u8fc7\u810f\u6570\u636e\uff0c\u4e0d\u6253\u5370\u810f\u6570\u636e\u5230\u65e5\u5fd7\u3002"),(0,a.kt)("h3",{id:"q6-\u5728datastream-api\u4e2d\u6784\u5efapostgres-cdc\u6e90\u65f6\u5982\u4f55\u914d\u7f6etablelist\u9009\u9879"},"Q6: \u5728DataStream API\u4e2d\u6784\u5efaPostgres CDC\u6e90\u65f6\u5982\u4f55\u914d\u7f6etableList\u9009\u9879\uff1f"),(0,a.kt)("p",null,"tableList\u9009\u9879\u8981\u6c42\u8868\u540d\u4f7f\u7528\u67b6\u6784\u540d\uff0c\u800c\u4e0d\u662fDataStream API\u4e2d\u7684\u8868\u540d\u3002\u5bf9\u4e8ePostgres CDC source\uff0ctableList\u9009\u9879\u503c\u5e94\u4e3a\u2018my_schema.my_table\u2019\u3002"),(0,a.kt)("h2",{id:"oracle_faq"},"Oracle_FAQ"),(0,a.kt)("h3",{id:"q1-oracle-\u5982\u4f55\u5b9e\u73b0\u5bf9\u540c\u4e00\u4e2a\u8868\u7684-upsert-\u529f\u80fd"},"Q1: Oracle \u5982\u4f55\u5b9e\u73b0\u5bf9\u540c\u4e00\u4e2a\u8868\u7684 upsert \u529f\u80fd\uff1f"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"MERGE INTO test T1\nUSING (select count(*) AS c from test T2 where T2.ID = 'xxxxx211108593445YY2022') x\nON ( x.c > 0 )\nWHEN MATCHED THEN\n    UPDATE SET USERID = 'asfafsasagsa' where ID = 'xxxxx211108593445YY2021'\nWHEN NOT MATCHED THEN\n    INSERT VALUES('1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21');\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'Flink sink \u4ee3\u7801\u98ce\u683c\n            String mergeSql =\n                   " MERGE INTO "\n                           + sinkTable\n                           + " T1 USING (SELECT COUNT (*) AS c FROM"\n                           + sinkTable\n                           + " T2 WHERE "\n                           + StringUtils.join(pkSet, ",")\n                           + " = "\n                           + StringUtils.join(pkValues, ",")\n                           + ") x ON ( x.c > 0 ) WHEN MATCHED THEN UPDATE SET "\n                           + " WHEN MATCHED THEN "\n                           + getSetSql(value)\n                           + " WHERE "\n                           + StringUtils.join(pkSet, ",")\n                           + " = "\n                           + StringUtils.join(pkValues, ",")\n                           + "WHEN NOT MATCHED THEN INSERT VALUES (\'"\n                           + StringUtils.join(values, "\',\'")\n                           + "\')";\n')),(0,a.kt)("h2",{id:"\u5373\u5e2d\u67e5\u8be2\u573a\u666f\u5206\u6790"},"\u5373\u5e2d\u67e5\u8be2\u573a\u666f\u5206\u6790"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"1\u3001clickhouse  \uff1a\u9002\u5408\u5355\u8868\u5c11\u5173\u8054\u67e5\u8be2\uff0c\u67e5\u8be2\u6548\u7387\u8f83\u9ad8\uff0c\u8fd0\u7ef4\u90e8\u7f72\u96be\u5ea6\u8f83\u5927\uff1b"),(0,a.kt)("li",{parentName:"ul"},"2\u3001starrocks\uff08\u6216doris):   \u8868\u5173\u8054\u591a\u4e5f\u80fd\u652f\u6491 , \u5e76\u53d1\u91cf\u8fd8\u53ef\u4ee5,\u9002\u7528\u573a\u666f\u5e7f\uff0c\u53ef\u63a8\u8350\u4f7f\u7528\uff0c\u4f46\u6570\u636e\u8981\u5199\u5165\u6216\u5bfc\u5165\u5230sr\u4e2d\uff0c\u65e0\u6cd5\u590d\u7528\u5df2\u6709\u7684hadoop\u8d44\u6e90\uff08\u867d\u7136\u6709\u5916\u90e8\u8868\u7684\u65b9\u5f0f\uff0c\u4f46\u67e5\u8be2\u901f\u5ea6\u6bd5\u7adf\u6ca1\u6709\u6570\u636e\u76f4\u63a5\u5b58\u653esr\u7684\u5feb\uff09\uff1b"),(0,a.kt)("li",{parentName:"ul"},"3\u3001trino \u6216 presto:  \u53ef\u76f4\u63a5\u67e5\u8be2hadoop hive\u8868,  \u5927\u89c4\u6a21\u5927sql\u67e5\u8be2\u65f6\uff0c\u5982\u679c\u8d44\u6e90\u8ddf\u4e0d\u4e0a\uff0c\u4f1a\u6709\u961f\u5217\u963b\u585e\uff0c\u6709\u8f83\u5927\u5ef6\u8fdf\uff1b")),(0,a.kt)("p",null,"\u6765\u81ea flink cdc \u9489\u9489\u7fa4 \u5c0f\u8292\u679c\u5148\u751f\u7684\u603b\u7ed3"))}p.isMDXComponent=!0}}]);